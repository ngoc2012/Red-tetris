"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e,n=require("react"),t=(e=n)&&"object"==typeof e&&"default"in e?e.default:e;function a(){return(a=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e}).apply(this,arguments)}var r=n.createContext({});exports.GamepadsContext=r,exports.GamepadsProvider=function(e){var o=e.children,i=n.useState({}),u=i[0],c=i[1],s=n.useRef(),d="ongamepadconnected"in window,f=n.useCallback((function(e){var n;c(a({},u,((n={})[e.index]={buttons:e.buttons,id:e.id,axes:e.axes},n)))}),[u,c]),m=function(e){f(e.gamepad)},p=n.useCallback((function(){for(var e=navigator.getGamepads?navigator.getGamepads():navigator.webkitGetGamepads?navigator.webkitGetGamepads():[],n=0;n<e.length;n++)e[n]&&f(e[n])}),[f]);n.useEffect((function(){return window.addEventListener("gamepadconnected",m),window.removeEventListener("gamepadconnected",m)}));var v=n.useCallback((function(){d||p(),s.current=requestAnimationFrame(v)}),[s,p,d]);return n.useEffect((function(){return s.current=requestAnimationFrame(v),function(){return cancelAnimationFrame(s.current)}}),[v]),t.createElement(r.Provider,{value:{gamepads:u,setGamepads:c}},o)},exports.useGamepads=function(e){var t=n.useRef([]),r=n.useRef(),o="ongamepadconnected"in window,i=function(n){var r;t.current=a({},t.current,((r={})[n.index]=n,r)),e(t.current)},u=function(e){i(e.gamepad)};n.useEffect((function(){return window.addEventListener("gamepadconnected",u),window.removeEventListener("gamepadconnected",u)}));var c=function e(){o||function(){for(var e=navigator.getGamepads?navigator.getGamepads():navigator.webkitGetGamepads?navigator.webkitGetGamepads():[],n=0;n<e.length;n++){var t=e[n];t&&null!==t&&i(t)}}(),r.current=requestAnimationFrame(e)};return n.useEffect((function(){return r.current=requestAnimationFrame(c),function(){return cancelAnimationFrame(r.current)}})),t.current};
//# sourceMappingURL=react-gamepads.cjs.production.min.js.map
